SQL Queries based on Questions:
x= area name
y= year

1. Fertility Rates
IF COMMUNITY:
  select name, (sum(numberOfChildren)/(population/2))
  from communities, household
  where communities.name = x and household.isWithin = (select communityID from communities
    where communities.name = x) and communities.year = y and household.year = y;

IF STATE:
  select name, (sum(numberOfChildren)/(population/2))
  from state, household
  where state.name = x and household.isWithin = (select communityID from communities
    where belongsTo = (select stateID from state where state.name = x)) and state.year = y
    and household.year = y
  group by household.year;
 
 4. Median Age vs. Property Value
 IF COMMUNITY:
  select name, Median(Age)
  from communities, person
  where communities.name = x and person.isMemberOf = (select serialNo from household where 
    household.isWithin = (select communityID from communities where communities.name = x))
  and communities.year = y and person.year = y;
    
  select name, Avg(propertyValue)
  from communities, household
  where communities.name = x and household.isWithin = (select communityID from communities
    where communities.name = x) and communities.year = y and household.year = y;

IF STATE:
  select name, Median(Age)
  from state, person
  where state.name = x and person.isMemberOf = (select serialNo from household where 
    household.isWithin = (select communityID from communities where belongsTo = (select 
      stateID from state where state.name = x))) and state.year = y and person.year = y;
      
  select name, Avg(propertyValue)
  from state, household
  where state.name = x and household.isWithin = (select communityID from communities
    where belongsTo = (select stateID from state where state.name = x)) and state. year = y
  and household.year = y;

5. Languages
IF COMMUNITY:
  select name, Count(distinct speaks)
  from communities, person
  where communities.name = x and person.isMemberOf = (select serialNo from household where 
    household.isWithin = (select communityID from communities where communities.name = x))
  and communities.year = y and person.year = y;
    
IF STATE:
  select name, Count(distinct speaks)
  from state, person
  where state.name = x and person.isMemberOf = (select serialNo from household where 
    household.isWithin = (select communityID from communities where belongsTo = (select 
      stateID from state where state.name = x))) and state.year = y and person.year = y;

1. & 5. Economic Qrowth = Avg Income
IF COMMUNITY:
  select communities.name, income.value
  from (income join household on income.serialNo = household.serialNo) join communities on 
    household.isWithin = communities.communityID
  where income.year = y and household.year = y and communities.year = y and communities.name = x;
  
IF STATE:
  select state.name, income.value
  from ((income join household on income.serialNo = household.serialNo) join communities on 
    household.isWithin = communities.communityID) join state on communities.belongsTo = state.stateID
  where income.year = y and household.year = y and communities.year = y and state.year = y
    and state.name = x;

3. Industry Growth vs Migration
IF COMMUNITY:
  select i1.communities.name, i1.industry.name, MAX(COUNT(distinct i1.personalID) - COUNT(distinct i2.personalID))
  from (select * from ((industry join person on (industry.industryID = person.worksFor and industry.year = person.year)) join
   household on (person.serialNo = household.serialNo and person.year = household.year)) join communities on (household.isWithin =
   communities.communityID and household.year = communities.year) where communities.name = x and year = y) as i1, 
   (select * from ((industry join person on (industry.industryID = person.worksFor and industry.year = person.year)) join
   household on (person.serialNo = household.serialNo and person.year = household.year)) join communities on (household.isWithin =
   communities.communityID and household.year = communities.year) where communities.name = x and year = y) as i2
   where i1.industryID = i2.industryID
   having (Count(distinct i1.personalID) - Count(distinct i2.personalID)) = 
    MAX(COUNT(distinct i1.personalID) - COUNT(distinct i2.personalID));
    
  select communities.name, Count(distinct personalID)
  from (person join household on (person.serialNo = household.serialNo and person.year = household.year)) join communities on 
    (household.isWithin = communities.communityID and household.year= communities.year)
  where communities.name = x and year = y and mobilityStatus = 2;
 
IF STATE:
  select i1.state.name, i1.industry.name, MAX(COUNT(distinct i1.personalID) - COUNT(distinct i2.personalID))
  from (select * from (((industry join person on (industry.industryID = person.worksFor and industry.year = person.year)) join
   household on (person.serialNo = household.serialNo and person.year = household.year)) join communities on (household.isWithin =
   communities.communityID and household.year = communities.year)) join state on (communities.belongsTo = state.stateID and 
   communities.year = state.year) where state.name = x and year = y) as i1, 
   (select * from (((industry join person on (industry.industryID = person.worksFor and industry.year = person.year)) join
   household on (person.serialNo = household.serialNo and person.year = household.year)) join communities on (household.isWithin =
   communities.communityID and household.year = communities.year)) join state on (communities.belongsTo = state.stateID and
   communities.year = state.year) where state.name = x and year = y) as i2
   where i1.industryID = i2.industryID
   having (Count(distinct i1.personalID) - Count(distinct i2.personalID)) = 
    MAX(COUNT(distinct i1.personalID) - COUNT(distinct i2.personalID));

  select state.name, Count(distinct personalID)
  from ((person join household on (person.serialNo = household.serialNo and person.year = household.year)) join communities on 
    (household.isWithin = communities.communityID and household.year= communities.year)) join state on (communities.belongsTo = 
    state.stateID and communities.year = state.year)
  where state.name = x and year = y and mobilityStatus = 2;

2. Poverty
IF COMMUNITY:
  select communities.name, Count(distinct personalID)
  from ((income join person on (income.pID = person.personalID and income.year = person.year)) join household on (person.serialNo = 
    household.serialNo and person.year = household.year)) join communities on (household.isWithin = communities.communityID and 
    household.year = communities.year)
  where communities.name = x and year = y
  having povertyIncomeRatio < 100;
  
IF STATE:
  select state.name, Count(distinct personalID)
  from (((income join person on (income.pID = person.personalID and income.year = person.year)) join household on (person.serialNo = 
    household.serialNo and person.year = household.year)) join communities on (household.isWithin = communities.communityID and 
    household.year = communities.year)) join state on (communities.belongsTo = state.stateID and communities.year = state.year)
  where state.name = x and year = y
  having povertyIncomeRatio < 100;

OTHER QUERIES:

Most Widely Spoken Language:
IF COMMUNITY:
  select communities.name, primarylanguage.name
  from ((primarylanguage join person on languageID = person.speaks) join household on (person.serialNo = household.serialNo and 
    person.year = household.year)) join communities on (household.isWithin = communities.communityID and household.year = 
    communities.year)
  where communities = x aand year = y
  group by languageID
  having Count(*) = (select Max(Count(*)) from ((primarylanguage join person on languageID = person.speaks) join household on (person.serialNo = household.serialNo and 
    person.year = household.year)) join communities on (household.isWithin = communities.communityID and household.year = 
    communities.year) where communities.name = x and year = y group by languageID);

IF STATE:
  select state.name, primarylanguage.name
  from (((primarylanguage join person on languageID = person.speaks) join household on (person.serialNo = household.serialNo and 
    person.year = household.year)) join communities on (household.isWithin = communities.communityID and household.year = 
    communities.year)) join state on (communities.belongsTo = state.stateID and communities.year = state.year)
  where state = x aand year = y
  group by languageID
  having Count(*) = (select Max(Count(*)) from (((primarylanguage join person on languageID = person.speaks) join household on (person.serialNo = household.serialNo and 
    person.year = household.year)) join communities on (household.isWithin = communities.communityID and household.year = 
    communities.year)) join state on (communities.belongsTo = state.stateID and communities.year and state.year)
    where communities.name = x and year = y group by languageID);
    
